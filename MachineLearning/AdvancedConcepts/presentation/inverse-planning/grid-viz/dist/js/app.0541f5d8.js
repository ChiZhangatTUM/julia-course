(function(e){function t(t){for(var i,c,a=t[0],s=t[1],l=t[2],d=0,f=[];d<a.length;d++)c=a[d],r[c]&&f.push(r[c][0]),r[c]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(i=!1)}i&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},r={app:0},o=[];function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("64a9"),r=n.n(i);r.a},"384c":function(e,t,n){},"3eb5":function(e,t,n){"use strict";var i=n("8452"),r=n.n(i);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GenViz")},o=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"genviz"},[n("GridViz",{attrs:{traces:e.traces,info:e.info,size:e.traceSize,tId:e.tId}})],1)},a=[],s=(n("34ef"),n("6b54"),n("a481"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Traces (Grid View)")]),n("div",{attrs:{id:"traces"}},e._l(e.traces,function(t,i){return n("div",{key:i},[n("Trace",{attrs:{trace:t,info:e.info,size:e.traceSize,tId:i}})],1)}),0)])}),l=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{height:e.size.w,width:e.size.w}},[n("rect",{staticStyle:{"fill-opacity":"0.0",stroke:"black"},attrs:{x:0,y:0,width:e.size.w,height:e.size.w}}),e._l(e.trace.scene.obstacles,function(t,i){return n("polygon",{key:i,staticStyle:{fill:"rgba(100,100,100,1)"},attrs:{points:e.svgPoints(t)}})}),e.trace.path.length>1?n("g",e._l(e.trace.path.length-1,function(t){return n("line",{key:t,staticStyle:{"stroke-width":"2",stroke:"rgba(100,100,100,0.4)"},attrs:{x1:e.xLogicalToPixel(e.trace.path[t-1].x),y1:e.yLogicalToPixel(e.trace.path[t-1].y),x2:e.xLogicalToPixel(e.trace.path[t].x),y2:e.yLogicalToPixel(e.trace.path[t].y)}})}),0):e._e(),n("circle",{attrs:{cx:e.xLogicalToPixel(e.trace.dest.x),cy:e.yLogicalToPixel(e.trace.dest.y),r:"3",fill:"rgba(255,0,0,0.5)"}}),n("circle",{attrs:{cx:e.xLogicalToPixel(e.trace.start.x),cy:e.yLogicalToPixel(e.trace.start.y),r:"3",fill:"blue"}}),e._l(e.trace.measurements,function(t,i){return n("circle",{key:i,attrs:{cx:e.xLogicalToPixel(t.x),cy:e.yLogicalToPixel(t.y),r:"2",fill:"black"}})})],2)},d=[],f={name:"Trace",props:["info","trace","size"],methods:{xLogicalToPixel:function(e){return(e-this.trace.scene.xmin)/(this.trace.scene.xmax-this.trace.scene.xmin)*this.size.w},yLogicalToPixel:function(e){return this.size.w-(e-this.trace.scene.ymin)/(this.trace.scene.ymax-this.trace.scene.ymin)*this.size.w},xPixelToLogical:function(e){return e/this.size.w*(this.trace.scene.xmax-this.trace.scene.xmin)+this.trace.scene.xmin},svgPoints:function(e){var t=this;return e.vertices.map(function(e){return t.xLogicalToPixel(e.x)+","+t.yLogicalToPixel(e.y)}).join(" ")}}},w=f,h=n("2877"),p=Object(h["a"])(w,u,d,!1,null,null,null);p.options.__file="Trace.vue";var v=p.exports,g={name:"GridViz",components:{Trace:v},data:function(){return{windowSize:{height:window.innerHeight,width:window.innerWidth}}},props:["traces","info"],computed:{traceSize:function(){return{h:this.windowSize.height/5,w:this.windowSize.width/5}}},mounted:function(){var e=this;this.$nextTick(function(){window.addEventListener("resize",function(){e.windowSize={height:window.innerHeight,width:window.innerWidth}})})}},x=g,y=(n("3eb5"),n("da64"),Object(h["a"])(x,s,l,!1,null,"1da6d2ca",null));y.options.__file="GridViz.vue";var m=y.exports;function z(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}window.clientId=z(),window.vizId=window.location.pathname.replace(/\//g,""),window.socket=new WebSocket("ws://"+window.location.hostname+":"+window.location.port),window.onbeforeunload=function(){window.socket.send(JSON.stringify({clientId:window.clientId,vizId:window.vizId,action:"disconnect"})),window.socket.close()},window.getCSS=function(){for(var e=[],t=0;t<document.styleSheets.length;t++)for(var n=document.styleSheets[t],i=("cssRules"in n?n.cssRules:n.rules),r=0;r<i.length;r++){var o=i[r];"cssText"in o?e.push(o.cssText):e.push(o.selectorText+" {\n"+o.style.cssText+"\n}\n")}return e.join("\n")};var T={name:"GenViz",components:{GridViz:m},data:function(){return{traces:{},info:{}}},methods:{initialize:function(e,t){console.log("initialize()"),console.log(e),this.info=e,this.traces=t},putTrace:function(e,t){console.log("putTrace()"),console.log(t),console.log(this.traces.hasOwnProperty(0)),this.$set(this.traces,e,t),console.log(this.traces.hasOwnProperty(0))},removeTrace:function(e){this.$delete(this.traces,e)},sendHTML:function(){var e=this.$refs["genviz"].innerHTML+"<style>".concat(window.getCSS(),"</style>");window.socket.send(JSON.stringify({clientId:window.clientId,vizId:window.vizId,action:"save",content:e}))}},mounted:function(){var e=this;window.socket.onopen=function(){window.socket.onmessage=function(t){var n=t.data,i=JSON.parse(n);switch(i.action){case"initialize":e.initialize(i.info,i.traces);break;case"putTrace":e.putTrace(i.tId,i.t);break;case"removeTrace":e.removeTrace(i.tId);break;case"saveHTML":e.sendHTML();break}},window.socket.send(JSON.stringify({clientId:window.clientId,vizId:window.vizId,action:"connect"}))}}},b=T,_=Object(h["a"])(b,c,a,!1,null,null,null);_.options.__file="GenViz.vue";var S=_.exports,k={components:{GenViz:S}},P=k,L=(n("034f"),Object(h["a"])(P,r,o,!1,null,null,null));L.options.__file="App.vue";var I=L.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(I)}}).$mount("#app")},"64a9":function(e,t,n){},8452:function(e,t,n){},da64:function(e,t,n){"use strict";var i=n("384c"),r=n.n(i);r.a}});
//# sourceMappingURL=app.0541f5d8.js.map