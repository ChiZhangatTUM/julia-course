(function(e){function n(n){for(var i,c,s=n[0],a=n[1],l=n[2],f=0,d=[];f<s.length;f++)c=s[f],o[c]&&d.push(o[c][0]),o[c]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);u&&u(n);while(d.length)d.shift()();return r.push.apply(r,l||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],i=!0,s=1;s<t.length;s++){var a=t[s];0!==o[a]&&(i=!1)}i&&(r.splice(n--,1),e=c(c.s=t[0]))}return e}var i={},o={app:0},r=[];function c(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=e,c.c=i,c.d=function(e,n,t){c.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,n){if(1&n&&(e=c(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)c.d(t,i,function(n){return e[n]}.bind(null,i));return t},c.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(n,"a",n),n},c.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},c.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var u=a;r.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";var i=t("64a9"),o=t.n(i);o.a},"56d7":function(e,n,t){"use strict";t.r(n);t("cadf"),t("551c"),t("097d");var i=t("2b0e"),o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("GenViz")},r=[],c=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{ref:"genviz"},[t("Trace",{attrs:{traces:e.traces,info:e.info}})],1)},s=[],a=(t("34ef"),t("6b54"),t("a481"),function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("svg",{attrs:{height:e.size.w,width:e.size.w}},[t("rect",{staticStyle:{"fill-opacity":"0.0",stroke:"black"},attrs:{x:0,y:0,width:e.size.w,height:e.size.w}}),e.containsKey(e.info,"scene")?t("g",e._l(e.info.scene.obstacles,function(n,i){return t("polygon",{key:i,staticStyle:{fill:"rgba(100,100,100,1)"},attrs:{points:e.svgPoints(n)}})}),0):e._e(),e.containsKey(e.info,"start")?t("g",[t("circle",{attrs:{cx:e.xLogicalToPixel(e.info.start.x),cy:e.yLogicalToPixel(e.info.start.y),r:"10",fill:"blue"}})]):e._e(),e.containsKey(e.info,"dest")?t("g",[t("circle",{attrs:{cx:e.xLogicalToPixel(e.info.dest.x),cy:e.yLogicalToPixel(e.info.dest.y),r:"10",fill:"red"}})]):e._e(),e.containsKey(e.info,"measurements")?t("g",e._l(e.info.measurements,function(n,i){return t("circle",{key:i,attrs:{cx:e.xLogicalToPixel(n.x),cy:e.yLogicalToPixel(n.y),r:"5",fill:"black"}})}),0):e._e(),e.containsKey(e.info,"tree_edges")?t("g",e._l(e.info.tree_edges,function(n,i){return t("line",{key:i,staticStyle:{stroke:"rgb(0,0,0)","stroke-width":"2"},attrs:{x1:e.xLogicalToPixel(n[0].x),y1:e.yLogicalToPixel(n[0].y),x2:e.xLogicalToPixel(n[1].x),y2:e.yLogicalToPixel(n[1].y)}})}),0):e._e(),e.containsKey(e.info,"path_edges")?t("g",e._l(e.info.path_edges,function(n,i){return t("line",{key:i,staticStyle:{stroke:"rgb(255,140,0)","stroke-width":"6"},attrs:{x1:e.xLogicalToPixel(n[0].x),y1:e.yLogicalToPixel(n[0].y),x2:e.xLogicalToPixel(n[1].x),y2:e.yLogicalToPixel(n[1].y)}})}),0):e._e(),e.containsKey(e.info,"tiles")?t("g",e._l(e.info.tiles,function(n,i){return t("rect",{key:i,style:{fillOpacity:.7*n.density,fill:"red"},attrs:{x:e.xLogicalToPixel(n.x),y:e.yLogicalToPixel(n.y+n.h),width:n.w*e.size.w/(e.info.scene.xmax-e.info.scene.xmin),height:n.h*e.size.w/(e.info.scene.ymax-e.info.scene.ymin)}})}),0):e._e(),e._l(e.traces,function(n,i){return t("g",{key:i},[t("circle",{attrs:{cx:e.xLogicalToPixel(n.dest.x),cy:e.yLogicalToPixel(n.dest.y),r:"5",fill:"rgba(255,0,0,0.5)"}})])})],2)}),l=[],u=(t("ac6a"),t("456d"),t("6762"),t("2fdb"),{name:"Trace",props:["info","traces"],methods:{xLogicalToPixel:function(e){return(e-this.info.scene.xmin)/(this.info.scene.xmax-this.info.scene.xmin)*this.size.w},yLogicalToPixel:function(e){return this.size.w-(e-this.info.scene.ymin)/(this.info.scene.ymax-this.info.scene.ymin)*this.size.w},xPixelToLogical:function(e){return e/this.size.w*(this.info.scene.xmax-this.info.scene.xmin)+this.info.scene.xmin},svgPoints:function(e){var n=this;return e.vertices.map(function(e){return n.xLogicalToPixel(e.x)+","+n.yLogicalToPixel(e.y)}).join(" ")},containsKey:function(e,n){return Object.keys(e).includes(n)}},data:function(){return{windowSize:{height:window.innerHeight,width:window.innerWidth}}},computed:{size:function(){return{h:this.windowSize.height/2,w:this.windowSize.width/2}}},mounted:function(){var e=this;this.$nextTick(function(){window.addEventListener("resize",function(){e.windowSize={height:window.innerHeight,width:window.innerWidth}})})}}),f=u,d=t("2877"),w=Object(d["a"])(f,a,l,!1,null,null,null);w.options.__file="Trace.vue";var h=w.exports;function y(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}window.clientId=y(),window.vizId=window.location.pathname.replace(/\//g,""),window.socket=new WebSocket("ws://"+window.location.hostname+":"+window.location.port),window.onbeforeunload=function(){window.socket.send(JSON.stringify({clientId:window.clientId,vizId:window.vizId,action:"disconnect"})),window.socket.close()},window.getCSS=function(){for(var e=[],n=0;n<document.styleSheets.length;n++)for(var t=document.styleSheets[n],i=("cssRules"in t?t.cssRules:t.rules),o=0;o<i.length;o++){var r=i[o];"cssText"in r?e.push(r.cssText):e.push(r.selectorText+" {\n"+r.style.cssText+"\n}\n")}return e.join("\n")};var g={name:"GenViz",components:{Trace:h},data:function(){return{traces:{},info:{}}},methods:{initialize:function(e,n){console.log("initialize()"),console.log(e),console.log(e.scene),this.info=e,this.traces=n},putTrace:function(e,n){console.log("putTrace()"),console.log(n),console.log(this.traces.hasOwnProperty(0)),this.$set(this.traces,e,n),console.log(this.traces.hasOwnProperty(0))},removeTrace:function(e){this.$delete(this.traces,e)},sendHTML:function(){var e=this.$refs["genviz"].innerHTML+"<style>".concat(window.getCSS(),"</style>");window.socket.send(JSON.stringify({clientId:window.clientId,vizId:window.vizId,action:"save",content:e}))}},mounted:function(){var e=this;window.socket.onopen=function(){window.socket.onmessage=function(n){var t=n.data,i=JSON.parse(t);switch(i.action){case"initialize":e.initialize(i.info,i.traces);break;case"putTrace":e.putTrace(i.tId,i.t);break;case"removeTrace":e.removeTrace(i.tId);break;case"saveHTML":e.sendHTML();break}},window.socket.send(JSON.stringify({clientId:window.clientId,vizId:window.vizId,action:"connect"}))}}},x=g,p=Object(d["a"])(x,c,s,!1,null,null,null);p.options.__file="GenViz.vue";var v=p.exports,m={components:{GenViz:v}},T=m,b=(t("034f"),Object(d["a"])(T,o,r,!1,null,null,null));b.options.__file="App.vue";var _=b.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(_)}}).$mount("#app")},"64a9":function(e,n,t){}});
//# sourceMappingURL=app.33dbe60d.js.map